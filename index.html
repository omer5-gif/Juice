<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>砖拽 砖 转专</title>
    <style>
        :root { --primary: #00bfff; --bg: #010105; --accent: #ffcc00; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; display: flex; align-items: center; justify-content: center; min-height: 100vh; overflow: hidden; }
        .studio-card { background: rgba(15, 15, 30, 0.95); border-radius: 30px; padding: 20px; width: 90%; max-width: 360px; border: 3px solid var(--primary); text-align: center; box-shadow: 0 0 30px var(--primary); position: relative; }
        .stats-bar { display: flex; justify-content: space-around; background: rgba(255,255,255,0.1); border-radius: 15px; padding: 8px; margin-bottom: 10px; font-size: 16px; font-weight: bold; color: var(--accent); border: 1px solid rgba(0, 191, 255, 0.3); }
        .yoshi-sprite { width: 100px; height: 100px; margin: 0 auto 10px; background-size: contain; background-repeat: no-repeat; background-position: center; animation: float 4s infinite ease-in-out; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        #chat-display { height: 45vh; overflow-y: auto; background: rgba(0,0,0,0.6); border-radius: 15px; padding: 15px; margin-bottom: 10px; text-align: right; display: flex; flex-direction: column; gap: 10px; border: 1px solid rgba(255,255,255,0.1); }
        .y-msg { color: var(--accent); font-weight: bold; }
        .t-msg { color: #ffffff; font-weight: bold; }
        .msg-text { color: #eee; line-height: 1.5; font-size: 16px; }
        .input-group { display: flex; gap: 8px; }
        input { flex: 1; padding: 12px; border-radius: 12px; border: 2px solid var(--primary); background: #000; color: white; font-size: 16px; outline: none; }
        button { padding: 10px 20px; border-radius: 12px; background: var(--primary); color: white; border: none; font-weight: bold; cursor: pointer; box-shadow: 0 4px 0 #0086b3; }
        button:active { transform: translateY(2px); box-shadow: 0 2px 0 #0086b3; }
    </style>
</head>
<body>

<div class="studio-card">
    <div class="stats-bar">
        <span>Robux: <span id="robuxVal">0</span></span>
        <span>专: <span id="levelVal">1</span></span>
    </div>
    <div class="yoshi-sprite" id="displayImg"></div>
    <div id="chat-display"></div>
    <div class="input-group">
        <input type="text" id="userInput" placeholder="转专, 转 ..." autocomplete="off">
        <button id="sendBtn">砖</button>
    </div>
</div>

<script>
    const itemsData = {
        "驻拽爪'": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/25.gif",
        "爪'专专": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/6.gif",
        "": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/150.gif",
        "专拽": "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHIyeGZidmZ4bmZ4bmZ4bmZ4bmZ4bmZ4bmZ4bmZ4bmZ4bmZ4bmZ4JmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1n/3o7TKMGpxxKQXWNPmU/giphy.gif",
        "专": "https://media.giphy.com/media/l0HlS98yv4J9l5SXY/giphy.gif"
    };

    const spellingWords = ["驻拽爪'", "专拽住", "专拽", "专", "转 住驻专", "砖拽", "砖拽", "专", "拽住", ""];
    const stories = [
        "驻住    住注 注 拽砖 砖, 驻转 拽 爪 住住 专砖 注!",
        " 住 拽砖 砖  砖注  驻 ,    砖    专专!",
        "专拽住    拽 砖 专 驻  转 爪 转  驻专!"
    ];

    let robux = parseInt(localStorage.getItem('tomerRobux')) || 0;
    let level = parseInt(localStorage.getItem('tomerLevel')) || 1;
    let exp = parseInt(localStorage.getItem('tomerExp')) || 0;
    let currentHero = localStorage.getItem('tomerHero') || "驻拽爪'";
    let currentAnswer = null;

    function saveData() {
        localStorage.setItem('tomerRobux', robux);
        localStorage.setItem('tomerLevel', level);
        localStorage.setItem('tomerExp', exp);
        localStorage.setItem('tomerHero', currentHero);
        document.getElementById('robuxVal').innerText = robux;
        document.getElementById('levelVal').innerText = level;
    }

    window.onload = function() {
        saveData();
        const display = document.getElementById('chat-display');
        const userInput = document.getElementById('userInput');
        const img = document.getElementById('displayImg');
        img.style.backgroundImage = `url('${itemsData[currentHero]}')`;

        function addMessage(sender, text, cls) {
            const div = document.createElement('div');
            div.innerHTML = `<span class="${cls}">${sender}:</span> <br><span class="msg-text">${text}</span>`;
            display.appendChild(div);
            display.scrollTop = display.scrollHeight;
        }

        document.getElementById('sendBtn').onclick = function() {
            const val = userInput.value.trim();
            if (!val) return;
            addMessage('转专', val, 't-msg');
            userInput.value = "";

            setTimeout(() => {
                let reply = "转专! 转 '砖', '注专转', '住驻专'  '转'.";

                if (currentAnswer !== null) {
                    if (val === currentAnswer || val.includes(currentAnswer)) {
                        robux += 50; exp++;
                        if (exp >= 5) { 
                            level++; exp = 0; robux += 100;
                            reply = ` !!! 注转 专 ${level}  拽转 住 100 Robux!`;
                        } else {
                            reply = ` !  拽转 50 Robux. 注转 专 砖专 注 ${5-exp} 转砖转.`;
                        }
                        saveData();
                    } else {
                        reply = `注! 转砖 转: **${currentAnswer}**. 住 砖 砖 !`;
                    }
                    currentAnswer = null;
                }
                else if (val.includes("砖")) {
                    let n1 = Math.floor(Math.random() * 20), n2 = Math.floor(Math.random() * 10);
                    reply = `砖:   ${n1} + ${n2}?`;
                    currentAnswer = (n1 + n2).toString();
                }
                else if (val.includes("注专转")) {
                    const word = spellingWords[Math.floor(Math.random() * spellingWords.length)];
                    reply = `砖转 转: 转转 拽 转 : **${word}**`;
                    currentAnswer = word;
                }
                else if (val.includes("住驻专")) {
                    reply = stories[Math.floor(Math.random() * stories.length)];
                }
                else if (val.includes("转")) {
                    reply = "转:  爪'专专 (150),  专拽 (200),   (300). 转 '拽 [砖]'";
                }
                else if (val.startsWith("拽")) {
                    const name = val.replace("拽", "").trim();
                    if (itemsData[name]) {
                        let price = name === "" ? 300 : (name === "专拽" ? 200 : 150);
                        if (robux >= price) {
                            robux -= price; currentHero = name; saveData();
                            img.style.backgroundImage = `url('${itemsData[name]}')`;
                            reply = `转转砖 转专! 注砖 转 砖拽 注 ${name}.`;
                        } else { reply = `住专  注 ${price-robux} Robux!`; }
                    }
                }

                addMessage('砖', reply, 'y-msg');
            }, 600);
        };

        userInput.onkeypress = (e) => { if (e.key === 'Enter') document.getElementById('sendBtn').click(); };
        addMessage('砖', ` 转专! 砖  ${robux} Robux.  驻转专 砖转 祝!`, 'y-msg');
    };
</script>
</body>
</html>
