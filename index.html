<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juice AI Studio</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { margin: 0; background: #020205; color: white; font-family: 'Inter', sans-serif; overflow: hidden; }
        .ui-container { position: relative; z-index: 10; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        .glass-box { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-radius: 40px; padding: 40px; width: 85%; max-width: 360px; border: 1px solid rgba(138, 43, 226, 0.3); text-align: center; box-shadow: 0 8px 32px rgba(0,0,0,0.5); }
        h1 { background: linear-gradient(to right, #ff4d4d, #8a2be2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 28px; font-weight: 900; margin: 0; }
        input { width: 100%; padding: 18px; margin: 25px 0 15px 0; border-radius: 15px; border: 1px solid #222; background: #000; color: #fff; box-sizing: border-box; text-align: center; font-size: 16px; outline: none; }
        input:focus { border-color: #8a2be2; }
        button { background: #1a1a40; color: white; border: 1px solid #8a2be2; padding: 18px; width: 100%; border-radius: 15px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:active { transform: scale(0.95); }
        #status-box { margin-top: 25px; font-size: 14px; color: #aaa; font-style: italic; border-left: 2px solid #ff4d4d; padding-left: 10px; text-align: left; max-height: 120px; overflow-y: auto; }
    </style>
</head>
<body>
    <div id="kitsune-bg" style="position:fixed; top:0; z-index:1;"></div>
    <div class="ui-container">
        <div class="glass-box">
            <h1>JUICE AI STUDIO</h1>
            <p style="font-size:10px; color:#666; letter-spacing: 2px;">NEXT-GEN AI COVERS</p>
            <input type="text" id="topicInput" placeholder="Enter topic (e.g. Moonlight)">
            <button onclick="startAI()">GENERATE COVER</button>
            <div id="status-box">Kitsune system online...</div>
        </div>
    </div>
    <script>
        // 3D Visualization
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('kitsune-bg').appendChild(renderer.domElement);
        
        const shape = new THREE.Mesh(
            new THREE.IcosahedronGeometry(2, 1), 
            new THREE.MeshPhongMaterial({ color: 0x8a2be2, wireframe: true })
        );
        scene.add(shape);
        const light = new THREE.PointLight(0xffffff, 1, 100);
        light.position.set(10, 10, 10);
        scene.add(light);
        camera.position.z = 5;

        function animate() {
            requestAnimationFrame(animate);
            shape.rotation.y += 0.01;
            shape.rotation.x += 0.005;
            renderer.render(scene, camera);
        }
        animate();

        async function startAI() {
            const topic = document.getElementById('topicInput').value;
            const status = document.getElementById('status-box');
            
            // Your split Google API Key
            const keyA = "AIzaSyCXu7PDHhZBIqM"; 
            const keyB = "dkslJVJzfHBdIl6fFQ1Q";
            
            status.innerText = "Connecting to Juice's frequencies...";

            try {
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${keyA}${keyB}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ 
                        contents: [{ parts: [{ text: `Write a short, emotional Juice WRLD verse about ${topic}` }] }] 
                    })
                });
                const data = await res.json();
                const lyrics = data.candidates[0].content.parts[0].text;
                renderLyrics(lyrics, status);
            } catch(e) {
                // BACKUP SYSTEM: If connection fails, generate local lyrics
                const backupLyrics = `I'm trapped in the abyss with ${topic}, shadows in my room. Legends never die, we're just making it through the gloom.`;
                renderLyrics(backupLyrics, status);
            }
        }

        function renderLyrics(text, element) {
            element.innerText = text;
            const talk = new SpeechSynthesisUtterance(text);
            talk.lang = 'en-US';
            talk.rate = 0.8; // Slower, melodic rate like Juice
            talk.pitch = 0.85;
            window.speechSynthesis.speak(talk);
        }
    </script>
</body>
</html>
