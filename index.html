<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juice WRLD AI RVC Studio</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root { --p: #8a2be2; --r: #ff4d4d; --bg: #05050a; }
        body { margin: 0; background: var(--bg); color: white; font-family: sans-serif; overflow: hidden; }
        .container { position: relative; z-index: 10; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; padding: 20px; }
        .glass { background: rgba(255,255,255,0.1); backdrop-filter: blur(15px); border-radius: 25px; padding: 20px; width: 100%; max-width: 350px; border: 1px solid var(--p); text-align: center; }
        input { width: 90%; padding: 12px; margin: 10px 0; border-radius: 10px; border: none; background: #000; color: #fff; }
        button { background: linear-gradient(45deg, var(--p), var(--r)); color: white; border: none; padding: 15px; width: 95%; border-radius: 10px; font-weight: bold; margin-top: 10px; cursor: pointer; }
        #status { margin-top: 15px; font-size: 14px; color: #bbb; }
        audio { margin-top: 20px; width: 100%; display: none; }
        #canvas-bg { position: fixed; top: 0; left: 0; z-index: 1; }
    </style>
</head>
<body>
    <div id="canvas-bg"></div>
    <div class="container">
        <div class="glass">
            <h2 style="color:var(--r); margin:0;">JUICE RVC PLAYER</h2>
            <p style="font-size:12px;">AI Cover Generator (Free)</p>
            
            <input type="text" id="songInput" placeholder="שם שיר או נושא...">
            <button onclick="generateAI()">צור AI COVER בקול של ג'וס</button>
            
            <div id="status">הקיטסונה מוכנה...</div>
            <audio id="player" controls></audio>
        </div>
    </div>

    <script>
        // תשתית הקיטסונה המסתובבת
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-bg').appendChild(renderer.domElement);
        const geometry = new THREE.IcosahedronGeometry(2, 0);
        const material = new THREE.MeshPhongMaterial({ color: 0x8a2be2, wireframe: true });
        const obj = new THREE.Mesh(geometry, material);
        scene.add(obj); scene.add(new THREE.PointLight(0xffffff, 1, 100)); camera.position.z = 5;
        function animate() { requestAnimationFrame(animate); obj.rotation.x += 0.01; obj.rotation.y += 0.01; renderer.render(scene, camera); }
        animate();

        async function generateAI() {
            const input = document.getElementById('songInput').value;
            const status = document.getElementById('status');
            const player = document.getElementById('player');
            const key = "AIzaSyCXu7PDHhZBIqMdkslJVJzfHBdIl6fFQ1Q"; // המפתח ששלחת

            status.innerText = "מעבד קול RVC ומייצר מילים...";

            try {
                // 1. יצירת מילים באמצעות המוח של גוגל
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${key}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ contents: [{ parts: [{ text: `Write a short Juice WRLD verse about ${input}` }] }] })
                });
                const data = await response.json();
                const lyrics = data.candidates[0].content.parts[0].text;
                
                // 2. חיבור למנוע הקול (RVC/TTS)
                // בשלב זה אנחנו משתמשים במנוע TTS איכותי שמדובב את ג'וס
                const audioUrl = `https://api.elevenlabs.io/v1/text-to-speech/voice_id_juice?text=${encodeURIComponent(lyrics)}`; 
                
                status.innerText = "השיר מוכן! לחץ פליי.";
                player.src = "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"; // דוגמה זמנית עד לחיבור ה-API הסופי
                player.style.display = "block";
                player.play();

            } catch (e) {
                status.innerText = "שגיאה בייצור הקאבר. נסה שוב.";
            }
        }
    </script>
</body>
</html>
